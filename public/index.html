<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title>SEXTANT</title>
</head>

<body>

<div class="row body">
  <div class="col-md-9 cell" id="cesiumContainer"></div>
  <div class="col-md-3 cell">
  	<h1 id="header">SEXTANT<smalle>view</small></h1>
  	<div id="app">
	    <form class="form-inline">
		    <div class="form-group">
	    		Optimize on
	  		</div>
	  		<div class="form-group">
			    <select class="form-control">
				  <option>Energy</option>
				  <option>Distance</option>
				  <option>Time</option>
				</select>
			</div>
			<button class="btn btn-default" type="button" onclick="getpextant()">Get pextant</button>
		</form>
    </div>
	<div class="input-group"  role="group" >
		<span class="input-group-addon">GPS coords</span>
		<button class="btn btn-default" type="button" onclick="start()">
			<span class="glyphicon glyphicon-play" aria-hidden="true"></span>Start
		</button>
		<button class="btn btn-default" type="button" onclick="stop()">
			<span class="glyphicon glyphicon-stop" aria-hidden="true"></span>Stop
		</button>
	</div>

	<button class="btn btn-default" type="button" onclick="zoom()">Zoom</button>
	  <button class="btn btn-default" type="button" onclick="setHeading()">Set heading</button>
	<button class="btn btn-default" type="button" onclick="zoomToTracks()">Zoom to GPS</button>
	<button class="btn btn-default" type="button" onclick="getwaypoints()">Get waypoints</button>
	<button type="button" class="btn btn-default" onclick="drawpextant()">Pextant draw</button>

	<div id="serialport">
		<button class="btn btn-default" type="button" onclick="serialstatus()">Serial status</button>
		<input
	        type="text" size="10" style="text-align: center"
	        placeholder="COM port name"
	    />
		<div id="serialports"></div>
	</div>
	<div><div id="globalpoint"></div><button class="btn btn-default" type="button" onclick="getpextantFromHere()">Get current point</button></div>
	<div id="plotlyMesh"></div>
	  Coordinates
    <div id="coords">

    </div>
    <div id='credits' >

    </div>
  </div>
 </div>

<script src="/build/bundle.js"></script>
<script>
	/*window.addEventListener("devicemotion", function (event){
		sextant.heading(event.alpha);
	}, true);*/


	function stop(){
		gpstracksilencer.connect();
		gpstracksilencer.send('stop');
	}
	function start(){
		gpstrack.connect('COM6');
		gpstrack.requestData();
	}
	function zoom(){
		sextant.zoom();
	}

	function setHeading(){
		sextant.heading(90);
	}

	function zoomToTracks(){
		sextant.zoomtotracks();
	}
	function serialstatus(){
		console.log('serialstatus0')
		sextant.serialrequest.connect();
		sextant.serialrequest.requestData();
	}
	function getwaypoints(){
		console.log('getting waypoints');
		sextant.getwaypoints.connect();
		sextant.getwaypoints.requestData();
	}
	function drawpextant(){
		sextant.getwaypoints.send("bla")
	}
	function getpextant(){
		console.log('getting waypoints');
		sextant.getpextant.connect();
		sextant.getpextant.requestData();
	}
	function getpextantFromHere(){
		console.log('pextant from here');
		console.log(sextant.globalpoint());

		document.getElementById("globalpoint").innerHTML =JSON.stringify(sextant.globalpoint());

		sextant.getpextant.connect();
		sextant.getpextant.send(JSON.stringify(sextant.globalpoint()));
	}
</script>
</body>
</html>